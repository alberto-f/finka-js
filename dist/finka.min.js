/* Finka.js v0.1.0 | (c) Bitbar Technologies and contributors | https://github.com/bitbar/finka-js/blob/master/LICENSE.md */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(0,function(){"use strict";var t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var e;(function(e){t.isNodeJs=null!=e&&null!=e.exports,t.isJSONString=function(t){try{JSON.parse(t)}catch(t){return!1}return!0},t.getLanguage=function(){return isNodeJs?(process.env.LANG||process.env.LANGUAGE||process.env.LC_ALL||process.env.LC_MESSAGES).replace(/^([a-z]{2})_([A-Z]{2}).+$/,(t,e,r)=>e+"-"+r):navigator.language},t.getCountry=function(){return getLanguage().substr(0,2).toUpperCase()},t.parseValue=function(t){if("string"!=typeof t)return t;if(isNumeric(t))return parseFloat(t);var e=t.toLowerCase();return"true"===e||"false"===e?"true"===e:t},t.xor=function(t,e){return!t!=!e}})(e={exports:{}},e.exports);function r(){return function(t){var e=4294967087,r=4294944443,n=12345,o=12345,a=123,i=12345,u=12345,f=123;0===t.length&&(t=[+new Date]);for(var s,c=(s=4022871197,function(t){t=t.toString();for(var e=0;e<t.length;e++){var r=.02519603282416938*(s+=t.charCodeAt(e));r-=s=r>>>0,s=(r*=s)>>>0,s+=4294967296*(r-=s)}return 2.3283064365386963e-10*(s>>>0)}),h=0;h<t.length;h++)n+=4294967296*c(t[h]),o+=4294967296*c(t[h]),a+=4294967296*c(t[h]),i+=4294967296*c(t[h]),u+=4294967296*c(t[h]),f+=4294967296*c(t[h]);n%=e,o%=e,a%=e,i%=r,u%=r,f%=r,c=null;var p=function(){var t,e,r=4294967087,s=4294944443;return t=1403580*o-810728*n,(t-=(t/r|0)*r)<0&&(t+=r),n=o,o=a,a=t,e=527612*f-1370589*i,(e-=(e/s|0)*s)<0&&(e+=s),i=u,u=f,f=e,t<=e?t-e+r:t-e},l=function(){return 2.3283064365386963e-10*p()};return l.uint32=p,l.fract53=function(){return l()+1.1102230246251565e-16*(2097151&p())},l.args=t,l}(Array.prototype.slice.call(arguments))}Object.copy=function(t,e,r){if(null==r||0==r.length)for(var n in t)e[n]=t[n];else for(n=0;n<r.length;n++)e[r[n]]=t[r[n]]},Object.isLike=function(t,e){var r;if("object"==typeof e&&"object"==typeof t){for(r in e)if(("function"==typeof t[r]?t[r]():t[r])!==e[r])return!1}else if(t!==e)return!1;return!0},Object.count=function(t){var e=0;for(let r in t)t.hasOwnProperty(r)&&(e+=1);return e},Array.prototype.empty=function(){return this.length=0,this},Array.prototype.absorb=function(t){return this.push.apply(this,t),this},Array.prototype.diff=function(t){return this.filter(e=>t.indexOf(e)<0)},Array.prototype.clone=function(){return this.slice(0)},Array.prototype.lookFor=function(t){var e;for(e=0;e<this.length;e++)if(Object.isLike(this[e],t))return e;return-1},Array.prototype.filterLike=function(t){var e,r;if(null==t)return this;for(r=[],e=0;e<this.length;e++)Object.isLike(this[e],t)&&r.push(this[e]);return r},Array.prototype.unique=function(){for(var t=this.concat(),e=0;e<t.length;++e)for(var r=e+1;r<t.length;++r)t[e]===t[r]&&t.splice(r--,1);return t},Array.prototype.shuffle=function(){for(var t=this.length-1;t>0;t--){var e=Math.floor(Math.rand()*(t+1)),r=this[t];this[t]=this[e],this[e]=r}},Array.sortArrayOfObjects=function(t,e,r){var n,o;null==r&&(r=!1),r=r?-1:1,t.sort(function(t,a){return n=t[e],o=a[e],"string"==typeof n&&(n=n.toLowerCase()),"string"==typeof o&&(o=o.toLowerCase()),n>o?1*r:n<o?-1*r:0})},Array.cloneArrayOfObjects=function(t){return t.map(function(t){return $.extend({},t)})},Array.wrap=function(t){return Array.isArray(t)?t:[t]},t.isNumeric=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},Number.isInt=function(t){return Number(t)===t&&t%1==0},Number.isFloat=function(t){return t===Number(t)&&t%1!=0},Number.prototype.pad=function(t){var e,r,n;for(n=t-(e=this.toString()).length,r=0;r<n;r++)e="0"+e;return e},Number.prototype.toClockString=function(t){var e,r,n;return e=this.valueOf(),void 0===t&&(t=!1),t||(e=Math.round(e/1e3)),r=Math.floor(e/60),n=Math.floor(e-60*r),r.pad(2)+":"+n.pad(2)},String.editDistance=function(t,e){var r,n,o=[];if(0===t.length)return e.length;if(0===e.length)return t.length;if(t==e)return 0;for(r=0;r<=e.length;r++)o[r]=[r];for(n=0;n<=t.length;n++)o[0][n]=n;for(r=1;r<=e.length;r++)for(n=1;n<=t.length;n++)e.charAt(r-1)==t.charAt(n-1)?o[r][n]=o[r-1][n-1]:o[r][n]=Math.min(o[r-1][n-1]+1,Math.min(o[r][n-1]+1,o[r-1][n]+1));return o[e.length][t.length]},String.getSimilarity=function(t,e){var r=Math.max(t.length,e.length);return(r-String.editDistance(t,e)/2)/r},String.prototype.capitaliseFirstLetter=function(t){var e=this.valueOf();return t&&(e=e.toLowerCase()),e.replace(/[a-z]/i,t=>t.toUpperCase())},String.prototype.lowerFirstLetter=function(){return this.valueOf().replace(/[a-z]/i,t=>t.toLowerCase())},String.prototype.toCamelCase=function(){var t,e,r,n;if((t=this.valueOf()).indexOf("-")<0)return t;for(r=(e=t.split("-"))[0],n=1;n<e.length;n++)r+=e[n].capitaliseFirstLetter();return r},String.prototype.toPascalCase=function(){return this.toCamelCase().capitaliseFirstLetter()},String.prototype.toKebabCase=function(){return this.valueOf().trim().toLowerCase().replace(/\s/g,"-")},
// Checksum CRC32 - By schnaader (MIT Licensed)
String.prototype.toChecksum=function(){var t,e,r;for(t=this.valueOf(),r=305419896,e=0;e<t.length;e++)r+=t.charCodeAt(e)*(e+1);return r},String.prototype.reverse=function(){return this.valueOf().split("").reverse().join("")},String.prototype.toBoolean=function(){return"true"===this.valueOf().toLowerCase()},String.prototype.isLike=function(t){return new RegExp("^"+t+"$").test(this.valueOf())},"function"!=typeof String.prototype.includes&&(String.prototype.includes=function(t){return this.valueOf().indexOf(t)>-1}),Date.SECOND=1e3,Date.MINUTE=60*Date.SECOND,Date.HOUR=60*Date.MINUTE,Date.DAY=24*Date.HOUR,Date.WEEK=7*Date.DAY,Date.TODAY=Date.HOUR*Math.floor(Date.now()/Date.HOUR),Date.YESTERDAY=Date.TODAY-Date.DAY,Date.TOMORROW=Date.TODAY+Date.DAY,Date.DAYAFTERTOMORROW=Date.TOMORROW+Date.DAY,Date.daysFromNow=function(t){return Date.now()+Date.DAY*t},Date.getFormat=function(t){var e,r,n,o;void 0===t&&(t=!0),e=["AF","CN","HU","JP","KP","KR","LT","MN","TW"],r=["BZ","FM","US"];try{n=getCountry()||"US"}catch(t){n="US"}return o=e.indexOf(n)>=0?"y-m-d":r.indexOf(n)>=0?"m/d/y":"d.m.y",1==t&&(o=(o=(o=o.replace("d","dd")).replace("m","mm")).replace("y","yyyy")),o},Date.getTimezoneName=function(){return(new this).toString().match(/\(([^)]+)\)$/)[1]},Date.toHmsFormat=function(t,e,r,n){var o,a,i,u,f,s,c=0;return void 0===e&&(e="round"),void 0===r&&(r="seconds"),f=function(t,e){return t>0?t+e:""},s=function(){u=(o+a+i).trim()},t=parseInt(t),c=void 0!==n&&n?t:Math.round(t/1e3),"hours"==r?(o=f(Math[e](c/3600),"h "),a=f(0,"m "),i=f("0s"),s(),0==u.length&&(u="0h")):"minutes"==r?(o=f(Math.floor(c/3600),"h "),a=f(Math[e](c%3600/60),"m "),i=f("0s"),s(),0==u.length&&(u="0m")):(o=f(Math.floor(c/3600),"h "),a=f(Math.floor(c%3600/60),"m "),i=Math[e](c%3600%60)+"s",s(),0==u.length&&(u="0s")),u},Date.toStopwatchFormat=function(t){var e,r,n,o,a;return t-=e=Math.max(0,t%1e3),e=Math.floor(e/100),t/=1e3,t-=r=Math.max(0,t%60),t/=60,t-=n=Math.max(0,t%60),t/=60,o=Math.max(0,t),a=n.pad(2)+":"+r.pad(2)+"."+e,o>0&&(a=o.pad(2)+":"+a),a},Date.prototype.daysPassed=function(t){if(void 0===t?t=new Date:"number"!=typeof t&&"string"!=typeof t||(t=new Date(t)),!(t instanceof Date))throw"Date.daysPassed: toDate is not instance of Date";return Math.floor(Math.abs((this.getTime()-t.getTime())/864e5))},Date.prototype.toUiTime=function(t){return void 0===t&&(t=!0),t=t?":"+this.getSeconds().pad(2):"",this.getHours().pad(2)+":"+this.getMinutes().pad(2)+t},Date.prototype.toCustomDate=function(t){return t=(t=(t=t.replace("d",this.getDate().pad(2))).replace("m",(this.getMonth()+1).pad(2))).replace("y",this.getFullYear())},Date.prototype.toUiDate=function(){return this.toCustomDate(Date.getFormat(!1))},Date.prototype.toUiDateTime=function(t){return this.toUiDate()+" "+this.toUiTime(t)},Date.prototype.toInputDateFormat=function(){return this.toCustomDate("y-m-d")},Date.prototype.toInputTimeFormat=function(){return this.toUiTime(!1)},Date.prototype.addTime=function(t){return this.setTime(this.getTime()+t)};var n=Object.freeze({default:r});function o(t,e){var r=t[0],n=t[1],o=t[2],a=t[3];n=s(n=s(n=s(n=s(n=f(n=f(n=f(n=f(n=u(n=u(n=u(n=u(n=i(n=i(n=i(n=i(n,o=i(o,a=i(a,r=i(r,n,o,a,e[0],7,-680876936),n,o,e[1],12,-389564586),r,n,e[2],17,606105819),a,r,e[3],22,-1044525330),o=i(o,a=i(a,r=i(r,n,o,a,e[4],7,-176418897),n,o,e[5],12,1200080426),r,n,e[6],17,-1473231341),a,r,e[7],22,-45705983),o=i(o,a=i(a,r=i(r,n,o,a,e[8],7,1770035416),n,o,e[9],12,-1958414417),r,n,e[10],17,-42063),a,r,e[11],22,-1990404162),o=i(o,a=i(a,r=i(r,n,o,a,e[12],7,1804603682),n,o,e[13],12,-40341101),r,n,e[14],17,-1502002290),a,r,e[15],22,1236535329),o=u(o,a=u(a,r=u(r,n,o,a,e[1],5,-165796510),n,o,e[6],9,-1069501632),r,n,e[11],14,643717713),a,r,e[0],20,-373897302),o=u(o,a=u(a,r=u(r,n,o,a,e[5],5,-701558691),n,o,e[10],9,38016083),r,n,e[15],14,-660478335),a,r,e[4],20,-405537848),o=u(o,a=u(a,r=u(r,n,o,a,e[9],5,568446438),n,o,e[14],9,-1019803690),r,n,e[3],14,-187363961),a,r,e[8],20,1163531501),o=u(o,a=u(a,r=u(r,n,o,a,e[13],5,-1444681467),n,o,e[2],9,-51403784),r,n,e[7],14,1735328473),a,r,e[12],20,-1926607734),o=f(o,a=f(a,r=f(r,n,o,a,e[5],4,-378558),n,o,e[8],11,-2022574463),r,n,e[11],16,1839030562),a,r,e[14],23,-35309556),o=f(o,a=f(a,r=f(r,n,o,a,e[1],4,-1530992060),n,o,e[4],11,1272893353),r,n,e[7],16,-155497632),a,r,e[10],23,-1094730640),o=f(o,a=f(a,r=f(r,n,o,a,e[13],4,681279174),n,o,e[0],11,-358537222),r,n,e[3],16,-722521979),a,r,e[6],23,76029189),o=f(o,a=f(a,r=f(r,n,o,a,e[9],4,-640364487),n,o,e[12],11,-421815835),r,n,e[15],16,530742520),a,r,e[2],23,-995338651),o=s(o,a=s(a,r=s(r,n,o,a,e[0],6,-198630844),n,o,e[7],10,1126891415),r,n,e[14],15,-1416354905),a,r,e[5],21,-57434055),o=s(o,a=s(a,r=s(r,n,o,a,e[12],6,1700485571),n,o,e[3],10,-1894986606),r,n,e[10],15,-1051523),a,r,e[1],21,-2054922799),o=s(o,a=s(a,r=s(r,n,o,a,e[8],6,1873313359),n,o,e[15],10,-30611744),r,n,e[6],15,-1560198380),a,r,e[13],21,1309151649),o=s(o,a=s(a,r=s(r,n,o,a,e[4],6,-145523070),n,o,e[11],10,-1120210379),r,n,e[2],15,718787259),a,r,e[9],21,-343485551),t[0]=g(r,t[0]),t[1]=g(n,t[1]),t[2]=g(o,t[2]),t[3]=g(a,t[3])}function a(t,e,r,n,o,a){return e=g(g(e,t),g(n,a)),g(e<<o|e>>>32-o,r)}function i(t,e,r,n,o,i,u){return a(e&r|~e&n,t,e,o,i,u)}function u(t,e,r,n,o,i,u){return a(e&n|r&~n,t,e,o,i,u)}function f(t,e,r,n,o,i,u){return a(e^r^n,t,e,o,i,u)}function s(t,e,r,n,o,i,u){return a(r^(e|~n),t,e,o,i,u)}function c(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}var h="0123456789abcdef".split("");function p(t){for(var e="",r=0;r<4;r++)e+=h[t>>8*r+4&15]+h[t>>8*r&15];return e}function l(t){return function(t){for(var e=0;e<t.length;e++)t[e]=p(t[e]);return t.join("")}(function(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)o(n,c(t.substring(e-64,e)));t=t.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)a[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(o(n,a),e=0;e<16;e++)a[e]=0;return a[14]=8*r,o(n,a),n}(t))}function g(t,e){return t+e&4294967295}if("5d41402abc4b2a76b9719d911017c592"!=l("hello")){function g(t,e){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}}var d=Object.freeze({default:l}),y=n&&r||n,m=d&&l||d;t.md5=m,Math.MRG32k2a=new y,Math.rand=function(){return this.MRG32k2a()},Math.roundTo=function(t,e){if((""+t).includes("e")){var r=(""+t).split("e"),n="";return+r[1]+e>0&&(n="+"),+(Math.round(+r[0]+"e"+n+(+r[1]+e))+"e-"+e)}return+(Math.round(t+"e+"+e)+"e-"+e)},Math.median=function(t){if(0===t.length)return 0;t.sort(function(t,e){return t-e});var e=Math.floor(t.length/2);return t.length%2?t[e]:(t[e-1]+t[e])/2},Math.sum=function(t){return 0===t.length?0:t.reduce(function(t,e){return t+e})},Math.avg=function(t){return 0===t.length?0:Math.sum(t)/t.length},RegExp.escapeString=function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},Promise.isPromise=function(t){return"object"==typeof t&&(t instanceof Promise||"function"==typeof t.then)};var v={};if(t.FileSize=v,v.B=1,v.KB=1024*v.B,v.MB=1024*v.KB,v.GB=1024*v.MB,v.TB=1024*v.GB,t.isWebpSupported=!1,null!=Image){var D=new Image;D.onload=function(){t.isWebpSupported=D.width>0&&D.height>0},D.src="data:image/webp;base64,UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA=="}null!=HTMLCanvasElement&&(HTMLCanvasElement.prototype.defaultDataType=function(){return global.isWebpSupported?"image/webp":"image/jpeg"},HTMLCanvasElement.prototype.toBase64=function(t){return void 0===t&&(t=this.defaultDataType()),this.toDataURL(t)},HTMLCanvasElement.prototype.toAlphaBase64=function(){var t="image/png";return global.isWebpSupported,this.toBase64(t)},HTMLCanvasElement.prototype.toBlobType=function(t,e){var r,n,o,a;if(void 0===e&&(e=this.defaultDataType()),"function"==typeof this.toBlob)this.toBlob(t,e,.9);else if("function"==typeof this.msToBlob)t(this.msToBlob());else{for(r=this.toBase64(e),o=[],r=(n=atob(r.split(",")[1])).length,a=0;a<r;a++)o.push(n.charCodeAt(a));t(new Blob([new Uint8Array(o)],{type:e}))}},
// Canvas downscale high quality - By GameAlchemist (MIT Licensed)
HTMLCanvasElement.prototype.downsize=function(t){var e,r,n,o,a,i,u,f,s,c,h,p,l,g,d,y,m,v,D,A,M,b,O,C,S,T,w,L,N,E,U,B,F;if(this,!(t<1&&t>0))throw"scale must be a positive number <1 ";for(e=t*t,r=this.width,n=this.height,u=Math.floor(r*t),f=Math.floor(n*t),o=0,a=0,i=0,s=0,h=0,M=0,b=0,c=0,p=0,l=0,g=0,d=0,y=0,m=0,v=0,D=!1,A=!1,O=this.getContext("2d").getImageData(0,0,r,n).data,C=new Float32Array(4*r*n),T=w=L=N=0,a=0;a<n;a++)for(M=4*(p=0|(h=a*t))*u,(A=p!=(0|h+t))&&(m=p+1-h,v=h+t-p-1),o=0;o<r;o++,i+=4)b=M+4*(c=0|(s=o*t)),(D=c!=(0|s+t))&&(d=c+1-s,y=s+t-c-1),T=O[i],w=O[i+1],L=O[i+2],N=O[i+3],D||A?D&&!A?(l=d*t,C[b]+=T*l,C[b+1]+=w*l,C[b+2]+=L*l,C[b+3]+=N*l,g=y*t,C[b+4]+=T*g,C[b+5]+=w*g,C[b+6]+=L*g,C[b+7]+=N*g):A&&!D?(l=m*t,C[b]+=T*l,C[b+1]+=w*l,C[b+2]+=L*l,C[b+3]+=N*l,g=v*t,C[b+4*u]+=T*g,C[b+4*u+1]+=w*g,C[b+4*u+2]+=L*g,C[b+4*u+3]+=N*g):(l=d*m,C[b]+=T*l,C[b+1]+=w*l,C[b+2]+=L*l,C[b+3]+=N*l,g=y*m,C[b+4]+=T*g,C[b+5]+=w*g,C[b+6]+=L*g,C[b+7]+=N*g,g=d*v,C[b+4*u]+=T*g,C[b+4*u+1]+=w*g,C[b+4*u+2]+=L*g,C[b+4*u+3]+=N*g,g=y*v,C[b+4*u+4]+=T*g,C[b+4*u+5]+=w*g,C[b+4*u+6]+=L*g,C[b+4*u+7]+=N*g):(C[b]+=T*e,C[b+1]+=w*e,C[b+2]+=L*e,C[b+3]+=N*e);for((E=document.createElement("canvas")).width=u,E.height=f,F=(B=(U=E.getContext("2d")).getImageData(0,0,u,f)).data,S=0,i=0,b=0;S<u*f;i+=4,b+=4,S++)F[b]=Math.ceil(C[i]),F[b+1]=Math.ceil(C[i+1]),F[b+2]=Math.ceil(C[i+2]),F[b+3]=Math.ceil(C[i+3]);return U.putImageData(B,0,0),E})});
